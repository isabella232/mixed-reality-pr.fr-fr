---
title: Portage des applications HoloLens (1ère gén.) sur HoloLens 2
description: Conçu pour les développeurs qui disposent déjà d’une application HoloLens (1re génération) et/ou d’une ancienne version de MRTK, et qui souhaitent effectuer le portage vers MRTK version 2 et HoloLens 2.
author: hferrone
ms.author: grbury
ms.date: 12/9/2020
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, test, MRTK, MRTK version 2, HoloLens 2, unity, portage, HoloLens 1ère génération, casque de réalité mixte, casque windows mixed reality, casque de réalité virtuelle, migration, bonnes pratiques, ARM
ms.openlocfilehash: 7a4c05ce4918ff3868265c40096bd37016d4546a
ms.sourcegitcommit: f2782d0925b2075fdaa0a4ecdef3dd4f0b4e1e99
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/09/2020
ms.locfileid: "96925953"
---
# <a name="porting-hololens-1st-gen-apps-to-hololens-2"></a><span data-ttu-id="80a0b-104">Portage des applications HoloLens (1ère gén.) sur HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="80a0b-104">Porting HoloLens (1st Gen) apps to HoloLens 2</span></span>

## <a name="overview"></a><span data-ttu-id="80a0b-105">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="80a0b-105">Overview</span></span>

<span data-ttu-id="80a0b-106">Ce guide sur mesure a été conçu pour aider les développeurs qui disposent d’une application Unity pour HoloLens (1re génération) à effectuer le portage de leur application vers l’appareil HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="80a0b-106">This guide is tailored to help developers with an existing Unity application for HoloLens (1st gen) port their application for the HoloLens 2 device.</span></span> <span data-ttu-id="80a0b-107">Le portage d’une application Unity pour HoloLens (1re génération) vers HoloLens 2 comprend quatre étapes clés.</span><span class="sxs-lookup"><span data-stu-id="80a0b-107">There are four key steps to porting a HoloLens (1st gen) Unity application to HoloLens 2.</span></span> 

<span data-ttu-id="80a0b-108">Les sections ci-dessous expliquent en détail chacune de ces étapes :</span><span class="sxs-lookup"><span data-stu-id="80a0b-108">The sections below detail information for each stage:</span></span>

| <span data-ttu-id="80a0b-109">Étape 1</span><span class="sxs-lookup"><span data-stu-id="80a0b-109">Step 1</span></span> | <span data-ttu-id="80a0b-110">Étape 2</span><span class="sxs-lookup"><span data-stu-id="80a0b-110">Step 2</span></span> | <span data-ttu-id="80a0b-111">Étape 3</span><span class="sxs-lookup"><span data-stu-id="80a0b-111">Step 3</span></span> | <span data-ttu-id="80a0b-112">Étape 4</span><span class="sxs-lookup"><span data-stu-id="80a0b-112">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Logo Visual Studio](../images/visualstudio_logo.png) | ![Logo Unity](../../design/images/logo-unity.png)| ![Icône Unity](../unity/images/hololens2_icon.jpg) | ![Logo MRTK](../../design/images/74-12.png) |
| <span data-ttu-id="80a0b-117">Télécharger les derniers outils</span><span class="sxs-lookup"><span data-stu-id="80a0b-117">Download latest tools</span></span> | <span data-ttu-id="80a0b-118">Mettre à jour un projet Unity</span><span class="sxs-lookup"><span data-stu-id="80a0b-118">Update Unity Project</span></span> | <span data-ttu-id="80a0b-119">Compiler pour ARM</span><span class="sxs-lookup"><span data-stu-id="80a0b-119">Compile for ARM</span></span> | <span data-ttu-id="80a0b-120">Effectuer une migration vers MRTK v2</span><span class="sxs-lookup"><span data-stu-id="80a0b-120">Migrate to MRTK v2</span></span>

<span data-ttu-id="80a0b-121">Éléments requis :</span><span class="sxs-lookup"><span data-stu-id="80a0b-121">Prerequisites:</span></span>

<span data-ttu-id="80a0b-122">Avant de démarrer le processus de portage, nous vous **recommandons vivement** d’utiliser le contrôle de code source pour enregistrer un instantané de l’état d’origine de vos applications.</span><span class="sxs-lookup"><span data-stu-id="80a0b-122">It's **highly recommended** that you use source control to save a snapshot your applications original state before starting the porting process.</span></span> <span data-ttu-id="80a0b-123">Nous vous recommandons également d’*enregistrer* les états des points de contrôle à différents stades du processus.</span><span class="sxs-lookup"><span data-stu-id="80a0b-123">Additionally, we recommend *saving* checkpoint states at various times during the process.</span></span> <span data-ttu-id="80a0b-124">Le fait de disposer d’une autre instance Unity de l’application d’origine peut vous être utile pour effectuer une comparaison côte à côte au cours du processus de portage.</span><span class="sxs-lookup"><span data-stu-id="80a0b-124">It can also be helpful to have another Unity instance of the original application to compare side-by-side during the porting process.</span></span> 

> [!NOTE]
> <span data-ttu-id="80a0b-125">Avant d’effectuer le portage, vérifiez que vous avez installé les derniers outils de développement Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="80a0b-125">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="80a0b-126">Pour la plupart des développeurs HoloLens, il s’agit d’effectuer une mise à jour vers la dernière version de Visual Studio 2019 et d’installer le SDK Windows correspondant.</span><span class="sxs-lookup"><span data-stu-id="80a0b-126">For most existing HoloLens developers, this involves updating to the latest version of Visual Studio 2019 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="80a0b-127">Le contenu ci-dessous offre une présentation détaillée des différentes versions de Unity et de Mixed Reality Toolkit (MRTK), version 2.</span><span class="sxs-lookup"><span data-stu-id="80a0b-127">The content that follows dives further into different Unity versions and the Mixed Reality Toolkit (MRTK) Version 2.</span></span>
>
> <span data-ttu-id="80a0b-128">Pour plus d’informations, consultez [Installer les outils](../install-the-tools.md).</span><span class="sxs-lookup"><span data-stu-id="80a0b-128">For more information, please see [Install the tools](../install-the-tools.md).</span></span>

## <a name="migrate-project-to-the-latest-version-of-unity"></a><span data-ttu-id="80a0b-129">Effectuer la migration d’un projet vers la dernière version de Unity</span><span class="sxs-lookup"><span data-stu-id="80a0b-129">Migrate project to the latest version of Unity</span></span>

<span data-ttu-id="80a0b-130">Si vous utilisez [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) est le chemin de prise en charge le mieux adapté à long terme, car il ne nécessite aucune modification importante dans Unity ou MRTK.</span><span class="sxs-lookup"><span data-stu-id="80a0b-130">If you're using [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) is the best long-term support path with no breaking changes in Unity or in MRTK.</span></span> <span data-ttu-id="80a0b-131">Vous devez évaluer les [dépendances de plug-ins](https://docs.unity3d.com/Manual/Plugins.html) qui existent actuellement dans votre projet et déterminer si ces DLL peuvent être créées ou non pour ARM64.</span><span class="sxs-lookup"><span data-stu-id="80a0b-131">You should assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in your project, and determine whether or not these DLLs can be built for ARM64.</span></span> <span data-ttu-id="80a0b-132">Si un plug-in de dépendance matérielle ne peut pas être généré pour ARM64, vous devrez peut-être continuer à créer votre application pour ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-132">If a hard dependency plugin cannot be built for ARM64, you may need to continue building your app for ARM.</span></span>

<!-- MRTK v2 always guarantees support for Unity 2018 LTS, but does not necessarily guarantee support for every iteration of Unity 2019.x.

To help clarify additional differences between [Unity 2018 LTS](https://unity3d.com/unity/qa/lts-releases) and Unity 2019.x, the following table outlines the trade-offs between the two versions. The primary difference between the two is the ability to compile for ARM64 in Unity 2019.

| Unity 2018 LTS | Unity 2019.x |
|----------|-------------------|
| ARM32 build support | ARM32 and ARM64 build support |
| Stable LTS build release | Beta stability |
| [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *deprecated* | [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *removed* |
| UNET Networking *deprecated* | UNET Networking *deprecated* |

-->

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="80a0b-133">Mettre à jour les paramètres de scène et de projet dans Unity</span><span class="sxs-lookup"><span data-stu-id="80a0b-133">Update scene/project settings in Unity</span></span>

<span data-ttu-id="80a0b-134">Après la mise à jour vers [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases), nous vous recommandons de mettre à jour certains paramètres Unity pour des résultats optimaux sur l’appareil.</span><span class="sxs-lookup"><span data-stu-id="80a0b-134">After updating to [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases), it's recommended that you update particular settings in Unity for optimal results on the device.</span></span> <span data-ttu-id="80a0b-135">Ces paramètres sont décrits en détail sous [Paramètres recommandés pour Unity](../unity/Recommended-settings-for-Unity.md).</span><span class="sxs-lookup"><span data-stu-id="80a0b-135">These settings are outlined in detail under [recommended settings for Unity](../unity/Recommended-settings-for-Unity.md).</span></span>

<span data-ttu-id="80a0b-136">Il convient de rappeler que le [back-end d’écriture de code principal .NET](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) est déprécié dans Unity 2018 et *supprimé* dans Unity 2019.</span><span class="sxs-lookup"><span data-stu-id="80a0b-136">It should be reiterated that the [.NET scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and *removed* in Unity 2019.</span></span> <span data-ttu-id="80a0b-137">Les développeurs doivent sérieusement envisager de basculer leur projet vers [IL2CPP.](https://docs.unity3d.com/Manual/IL2CPP.html)</span><span class="sxs-lookup"><span data-stu-id="80a0b-137">Developers should strongly consider switching their project to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span>

> [!NOTE]
> <span data-ttu-id="80a0b-138">Il est possible que le back-end d’écriture de code IL2CPP entraîne des temps de génération plus longs entre Unity et Visual Studio. Les développeurs doivent configurer leur ordinateur de développement de manière à [optimiser les temps de génération IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span><span class="sxs-lookup"><span data-stu-id="80a0b-138">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio, and developers should set up their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="80a0b-139">Il peut également être avantageux de configurer un [serveur de cache](https://docs.unity3d.com/Manual/CacheServer.html), en particulier pour les projets Unity qui comprennent une grande quantité de ressources (à l’exclusion des fichiers de script) ainsi que pour les scènes et les ressources qui changent constamment.</span><span class="sxs-lookup"><span data-stu-id="80a0b-139">It might also be beneficial to set up a [cache server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes and assets.</span></span> <span data-ttu-id="80a0b-140">Lorsque vous ouvrez un projet, Unity stocke les ressources éligibles dans un format de cache interne sur l’ordinateur de développement.</span><span class="sxs-lookup"><span data-stu-id="80a0b-140">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="80a0b-141">Les éléments doivent être réimportés et retraités après modification.</span><span class="sxs-lookup"><span data-stu-id="80a0b-141">Items must be re-imported and re-processed when modified.</span></span> <span data-ttu-id="80a0b-142">Ce processus peut être effectué une fois puis enregistré dans un serveur de cache. Pour gagner du temps, vous pouvez le partager avec les autres développeurs, au lieu que chaque développeur réimporte localement les éléments modifiés.</span><span class="sxs-lookup"><span data-stu-id="80a0b-142">This process can be done once and saved in a cache server and consequently shared with other developers to save time, as opposed to every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="80a0b-143">Une fois qu’ils ont pris en compte les changements importants entraînés par la mise à jour de la version de Unity, vous devez générer et tester vos applications sur HoloLens (1re génération).</span><span class="sxs-lookup"><span data-stu-id="80a0b-143">After addressing any breaking changes from moving to the updated Unity version, you should build and test your current applications on HoloLens (1st gen).</span></span> <span data-ttu-id="80a0b-144">C’est le bon moment pour créer et enregistrer une validation dans le contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="80a0b-144">This is a good time to create and save a commit into source control.</span></span>

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="80a0b-145">Compiler des dépendances ou des plug-ins pour processeurs ARM</span><span class="sxs-lookup"><span data-stu-id="80a0b-145">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="80a0b-146">HoloLens (1re génération) exécutait les applications sur un processeur x86 alors que l’HoloLens 2 utilise un processeur ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-146">HoloLens (1st gen) executes applications on an x86 processor while the HoloLens 2 uses an ARM processor.</span></span> <span data-ttu-id="80a0b-147">C’est pourquoi les applications HoloLens existantes doivent être portées en vue de prendre en charge ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-147">Therefore, existing HoloLens applications need to be ported over to support ARM.</span></span> <span data-ttu-id="80a0b-148">Comme nous l’avons vu précédemment, Unity 2018 LTS prend en charge la compilation des applications ARM32, alors que Unity 2019.x prend en charge la compilation des applications ARM32 et ARM64.</span><span class="sxs-lookup"><span data-stu-id="80a0b-148">As noted earlier, Unity 2018 LTS supports compiling ARM32 apps while Unity 2019.x supports compiling ARM32 and ARM64 apps.</span></span> <span data-ttu-id="80a0b-149">Il est recommandé de développer des applications ARM64, car celles-ci fournissent de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="80a0b-149">Developing for ARM64 applications is preferred, as there is a material difference in performance.</span></span> <span data-ttu-id="80a0b-150">Toutefois, cela nécessite que toutes les [dépendances de plug-ins](https://docs.unity3d.com/Manual/Plugins.html) soient également conçues pour ARM64.</span><span class="sxs-lookup"><span data-stu-id="80a0b-150">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span>

<span data-ttu-id="80a0b-151">Passez en revue toutes les dépendances DLL qui se trouvent dans votre application.</span><span class="sxs-lookup"><span data-stu-id="80a0b-151">Review all DLL dependencies in your application.</span></span> <span data-ttu-id="80a0b-152">Il est recommandé de supprimer du projet toute dépendance dont vous n’avez plus besoin.</span><span class="sxs-lookup"><span data-stu-id="80a0b-152">It is advisable to remove any dependency that is no longer needed from your project.</span></span> <span data-ttu-id="80a0b-153">Pour les autres plug-ins nécessaires, ingérez les fichiers binaires ARM32 ou ARM64 dans votre projet Unity.</span><span class="sxs-lookup"><span data-stu-id="80a0b-153">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span>

<span data-ttu-id="80a0b-154">Après l’ingestion des DLL nécessaires, créez une solution Visual Studio dans Unity, puis compilez un AppX pour ARM dans Visual Studio, afin de vérifier si votre application peut être conçue pour les processeurs ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-154">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and then compile an AppX for ARM in Visual Studio to test that your application can be built for ARM processors.</span></span> <span data-ttu-id="80a0b-155">Il est conseillé d’enregistrer l’application sous forme de validation dans votre solution de contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="80a0b-155">It is advised to save the application as a commit in your source control solution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="80a0b-156">Vous pouvez exécuter l’application utilisant MRTK v1 sur HoloLens 2 après avoir remplacé la cible de build par ARM, à supposer que toutes les autres conditions soient remplies.</span><span class="sxs-lookup"><span data-stu-id="80a0b-156">Application's using MRTK v1 can be run on HoloLens 2 after changing the build target to ARM, assuming that all other requirements are met.</span></span> <span data-ttu-id="80a0b-157">Vous devez donc veiller à disposer des versions ARM de tous vos plug-ins.</span><span class="sxs-lookup"><span data-stu-id="80a0b-157">This includes making sure you have ARM versions of all your plugins.</span></span> <span data-ttu-id="80a0b-158">Toutefois, votre application n’aura pas accès aux fonctions spécifiques à HoloLens 2 comme la main articulée et le suivi oculaire.</span><span class="sxs-lookup"><span data-stu-id="80a0b-158">However, your app won't have access to HoloLens 2 specific functions like articulated hand and eye tracking.</span></span> <span data-ttu-id="80a0b-159">MRTK v1 et MRTK v2 ont des espaces de noms différents qui permettent aux deux versions d’être dans le même projet, ce qui est utile pour passer de l’une à l’autre.</span><span class="sxs-lookup"><span data-stu-id="80a0b-159">MRTK v1 and MRTK v2 have different namespaces that allow both versions to be in the same project, which is useful for transitioning from one to the other.</span></span>

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="80a0b-160">Effectuer une mise à jour vers MRTK version 2</span><span class="sxs-lookup"><span data-stu-id="80a0b-160">Update to MRTK version 2</span></span>

<span data-ttu-id="80a0b-161">[MRTK version 2](https://github.com/microsoft/MixedRealityToolkit-Unity) est le nouveau kit d’outils en supplément de Unity qui prend en charge à la fois HoloLens (1re génération) et HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="80a0b-161">[MRTK Version 2](https://github.com/microsoft/MixedRealityToolkit-Unity) is the new toolkit on top of Unity that supports both HoloLens (1st gen) and HoloLens 2.</span></span> <span data-ttu-id="80a0b-162">Il s’agit également du kit dans lequel toutes les nouvelles fonctionnalités HoloLens 2 ont été ajoutées, notamment les interactions avec les mains et le suivi oculaire.</span><span class="sxs-lookup"><span data-stu-id="80a0b-162">It is also where all the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

<span data-ttu-id="80a0b-163">Pour plus d’informations sur l’utilisation de MRTK version 2, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="80a0b-163">Check out the following resources for more information on using MRTK version 2:</span></span>

- [<span data-ttu-id="80a0b-164">Page d’accueil de la documentation MRTK (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-164">MRTK - Documentation home (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html)
- [<span data-ttu-id="80a0b-165">Guide d’installation (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-165">Installation guide (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Installation.html)
- [<span data-ttu-id="80a0b-166">MRTK - Suivi des mains (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-166">MRTK - Hand tracking (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/HandTracking.html)
- [<span data-ttu-id="80a0b-167">MRTK - Suivi du regard (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-167">MRTK - Eye tracking (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_Main.html)

### <a name="prepare-for-the-migration"></a><span data-ttu-id="80a0b-168">Se préparer à la migration</span><span class="sxs-lookup"><span data-stu-id="80a0b-168">Prepare for the migration</span></span>

<span data-ttu-id="80a0b-169">Avant d’ingérer les nouveaux [fichiers \*.unitypackage pour MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), il est recommandé d’effectuer un inventaire de **1) tout code personnalisé intégré à MRTK v1** et **2) tout code personnalisé pour les interactions d’entrée ou les composants d’expérience utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="80a0b-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it is recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="80a0b-170">Lors de l’ingestion de MRTK v2, le conflit le plus fréquemment rencontré par les développeurs de réalité mixte concerne les entrées et les interactions.</span><span class="sxs-lookup"><span data-stu-id="80a0b-170">The most common and prevalent conflict for a mixed reality developer ingesting MRTK v2 involves input and interactions.</span></span> <span data-ttu-id="80a0b-171">Nous vous recommandons de lire l’article concernant le [modèle d’entrée MRTK v2](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span><span class="sxs-lookup"><span data-stu-id="80a0b-171">It is advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="80a0b-172">Enfin, [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) est passé d’un modèle de scripts et d’objets gestionnaires en scène à une architecture de configuration et de fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="80a0b-172">Finally, the new [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="80a0b-173">La hiérarchie de scène et le modèle d’architecture sont désormais plus propres. Toutefois, ce changement nécessite que vous compreniez les nouveaux profils de configuration.</span><span class="sxs-lookup"><span data-stu-id="80a0b-173">This results in a cleaner scene hierarchy and architecture model, but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="80a0b-174">Pour cela, lisez le [Guide de configuration de Mixed Reality Toolkit](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) afin de vous familiariser avec les profils et les paramètres importants que vous devez adapter aux besoins de votre application.</span><span class="sxs-lookup"><span data-stu-id="80a0b-174">Thus, please read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span>

### <a name="perform-the-migration"></a><span data-ttu-id="80a0b-175">Effectuer la migration</span><span class="sxs-lookup"><span data-stu-id="80a0b-175">Perform the migration</span></span>

<span data-ttu-id="80a0b-176">Après l’importation de [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), votre projet Unity comprend probablement plusieurs erreurs liées au compilateur.</span><span class="sxs-lookup"><span data-stu-id="80a0b-176">After importing [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), your Unity project most likely has many compiler-related errors.</span></span> <span data-ttu-id="80a0b-177">Ces erreurs sont généralement dues à la nouvelle structure des espaces de noms et aux nouveaux noms de composants.</span><span class="sxs-lookup"><span data-stu-id="80a0b-177">These are commonly due to the new namespace structure and new component names.</span></span> <span data-ttu-id="80a0b-178">Pour corriger ces erreurs, dans vos scripts, remplacez les anciens espaces de noms et composants par les nouveaux.</span><span class="sxs-lookup"><span data-stu-id="80a0b-178">Proceed to resolve these errors by modifying your scripts to the new namespaces and components.</span></span>

<span data-ttu-id="80a0b-179">Pour plus d’informations sur les différences entre HTK/MRTK et MRTK v2 au niveau des API, consultez le guide de portage sur le [wiki MRTK Version 2](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span><span class="sxs-lookup"><span data-stu-id="80a0b-179">For information on the specific API differences between HTK/MRTK and MRTK v2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="80a0b-180">Bonnes pratiques</span><span class="sxs-lookup"><span data-stu-id="80a0b-180">Best practices</span></span>

- <span data-ttu-id="80a0b-181">Privilégier l’utilisation du [nuanceur MRTK standard](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_MRTKStandardShader.html).</span><span class="sxs-lookup"><span data-stu-id="80a0b-181">Prefer use of the [MRTK standard shader](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/README_MRTKStandardShader.html).</span></span>
- <span data-ttu-id="80a0b-182">Travailler sur un seul changement important à la fois (par exemple, passer de IFocusable à [IMixedRealityFocusHandler](https://microsoft.github.io/MixedRealityToolkit-Unity/api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusHandler.html)).</span><span class="sxs-lookup"><span data-stu-id="80a0b-182">Work on one breaking change type at a time (ex: IFocusable to [IMixedRealityFocusHandler](https://microsoft.github.io/MixedRealityToolkit-Unity/api/Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusHandler.html)).</span></span>
- <span data-ttu-id="80a0b-183">Effectuer des tests après chaque modification et utiliser le contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="80a0b-183">Test after every change and use source control.</span></span>
- <span data-ttu-id="80a0b-184">Utiliser l’expérience utilisateur MRTK par défaut (boutons, fenêtres, etc.) lorsque cela est possible.</span><span class="sxs-lookup"><span data-stu-id="80a0b-184">Use default MRTK UX (buttons, slates, etc.), when possible.</span></span>
- <span data-ttu-id="80a0b-185">Éviter de modifier directement les fichiers MRTK. Pour cela, ajouter des wrappers autour des composants MRTK.</span><span class="sxs-lookup"><span data-stu-id="80a0b-185">Refrain from modifying MRTK files directly; create wrappers around MRTK components.</span></span>
    - <span data-ttu-id="80a0b-186">Cette action facilite les futures ingestions et mises à jour de MRTK.</span><span class="sxs-lookup"><span data-stu-id="80a0b-186">This action eases future MRTK ingestions and updates.</span></span>
- <span data-ttu-id="80a0b-187">Explorer les exemples de scènes fournis dans MRTK (surtout *HandInteractionExamples.scene*).</span><span class="sxs-lookup"><span data-stu-id="80a0b-187">Review and explore sample scenes provided in the MRTK, especially *HandInteractionExamples.scene*.</span></span>
- <span data-ttu-id="80a0b-188">Recréer une interface utilisateur basée sur les canevas avec des quadrants, des colliders et du texte TextMeshPro.</span><span class="sxs-lookup"><span data-stu-id="80a0b-188">Rebuild canvas-based UI with quads, colliders, and TextMeshPro text.</span></span>
- <span data-ttu-id="80a0b-189">Activer [Partage de mémoire tampon en profondeur](../unity/camera-in-unity.md#sharing-your-depth-buffers-with-windows) ou [définir le point de focus](../unity/focus-point-in-unity.md) ; préférer utiliser une mémoire tampon de profondeur 16 bits pour obtenir de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="80a0b-189">Enable [Depth Buffer Sharing](../unity/camera-in-unity.md#sharing-your-depth-buffers-with-windows) or [set focus point](../unity/focus-point-in-unity.md); prefer to use a 16-bit depth buffer for better performance.</span></span> <span data-ttu-id="80a0b-190">Vérifier lors de l’affichage de la couleur que la profondeur est également affichée.</span><span class="sxs-lookup"><span data-stu-id="80a0b-190">Ensure when rendering color, to also render depth.</span></span> <span data-ttu-id="80a0b-191">Unity n’écrit généralement pas de profondeur pour les gameobjects transparents et de texte.</span><span class="sxs-lookup"><span data-stu-id="80a0b-191">Unity generally does not write depth for transparent and text gameobjects.</span></span> 
- <span data-ttu-id="80a0b-192">Définir le chemin de rendu d’instance à passage unique.</span><span class="sxs-lookup"><span data-stu-id="80a0b-192">Set Single Pass Instanced Rendering Path.</span></span>
- <span data-ttu-id="80a0b-193">Utiliser le [profil de configuration HoloLens 2 pour MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Profiles/Profiles.html#hololens-2-profile).</span><span class="sxs-lookup"><span data-stu-id="80a0b-193">Utilize the [HoloLens 2 configuration profile for MRTK](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Profiles/Profiles.html#hololens-2-profile)</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="80a0b-194">Tester votre application</span><span class="sxs-lookup"><span data-stu-id="80a0b-194">Testing your application</span></span>

<span data-ttu-id="80a0b-195">Dans MRTK Version 2, vous pouvez simuler des interactions avec les mains directement dans Unity, ainsi que développer avec les nouvelles API pour les interactions avec les mains et le suivi oculaire.</span><span class="sxs-lookup"><span data-stu-id="80a0b-195">In MRTK Version 2, you can simulate hand interactions directly in Unity as well as develop with the new APIs for hand interactions and eye tracking.</span></span> <span data-ttu-id="80a0b-196">L’appareil HoloLens 2 est nécessaire pour créer une expérience utilisateur satisfaisante.</span><span class="sxs-lookup"><span data-stu-id="80a0b-196">The HoloLens 2 device is required to create a satisfying user experience.</span></span> <span data-ttu-id="80a0b-197">Nous vous invitons à commencer à étudier la documentation et les outils pour mieux comprendre de quoi il s’agit.</span><span class="sxs-lookup"><span data-stu-id="80a0b-197">You are encouraged to start studying the documentation and tools for greater understanding.</span></span> <span data-ttu-id="80a0b-198">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) prend en charge le développement sur HoloLens 1re génération. Les modèles d’entrée traditionnels, comme la sélection via un clic dans l’air, peuvent être testés sur HoloLens (1re génération).</span><span class="sxs-lookup"><span data-stu-id="80a0b-198">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) supports development on HoloLens (1st gen) and traditional input models, such as select via air-tap can be tested on HoloLens (1st gen).</span></span> 

## <a name="updating-your-interaction-model-for-hololens-2"></a><span data-ttu-id="80a0b-199">Mise à jour de votre modèle d’interaction pour HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="80a0b-199">Updating your interaction model for HoloLens 2</span></span>

> [!CAUTION]
> <span data-ttu-id="80a0b-200">Si votre projet utilise des API XR.WSA, celles-ci seront progressivement supprimées au profit des nouvelles API d’entrée XR d’Unity dans les futures versions d’Unity.</span><span class="sxs-lookup"><span data-stu-id="80a0b-200">If your project is using any of the XR.WSA APIs, these are being phased out in favor of Unity's new XR input APIs in future Unity releases.</span></span> <span data-ttu-id="80a0b-201">Vous trouverez plus d’informations sur les [API d’entrée XR ici](https://docs.unity3d.com/Manual/xr_input.html).</span><span class="sxs-lookup"><span data-stu-id="80a0b-201">You can find more information about the [XR input APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="80a0b-202">Une fois que votre application est portée et préparée pour HoloLens 2, vous êtes prêt pour la mise à jour de votre modèle d’interaction et des positionnements de vos conceptions d’hologrammes.</span><span class="sxs-lookup"><span data-stu-id="80a0b-202">Once your application is ported and prepped for HoloLens 2, you're ready to consider updating your interaction model and hologram design placements.</span></span>
<span data-ttu-id="80a0b-203">Dans HoloLens (1re génération), votre application comprend probablement un modèle d’interaction de type « Suivi et validation » avec des hologrammes relativement lointains qui rentrent entièrement dans le champ de vision.</span><span class="sxs-lookup"><span data-stu-id="80a0b-203">In HoloLens (1st gen), your application likely has a gaze and commit interaction model with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="80a0b-204">Voici les étapes permettant de mettre à jour votre application afin de l’adapter à HoloLens 2 :</span><span class="sxs-lookup"><span data-stu-id="80a0b-204">Steps to update your application design to be best suited for HoloLens 2:</span></span>
1.  <span data-ttu-id="80a0b-205">Composants MRTK : En fonction du travail préalable, si vous avez ajouté [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), vous pourrez tirer parti de plusieurs composants ou scripts conçus et optimisés pour HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="80a0b-205">MRTK components: Per the pre-work, if you added [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="80a0b-206">Modèle d’interaction : Envisagez de mettre à jour votre modèle d’interaction.</span><span class="sxs-lookup"><span data-stu-id="80a0b-206">Interaction model: Consider updating your interaction model.</span></span> <span data-ttu-id="80a0b-207">Pour la plupart des scénarios, nous vous recommandons de passer du modèle « Suivi et validation » au modèle d’interaction manuelle.</span><span class="sxs-lookup"><span data-stu-id="80a0b-207">For most scenarios, we recommend switching from gaze and commit to hands.</span></span> <span data-ttu-id="80a0b-208">Étant donné que les hologrammes sont généralement hors de portée, le passage à l’interaction manuelle permet des rayons de pointage plus lointains et des mouvements de saisie.</span><span class="sxs-lookup"><span data-stu-id="80a0b-208">With your holograms typically being out of arms-reach, switching to hands results in far interaction pointing rays and grab gestures.</span></span>

3.  <span data-ttu-id="80a0b-209">Positionnement des hologrammes : Une fois que vous êtes passé au modèle d’interaction manuelle, vous pouvez rapprocher les hologrammes afin d’interagir directement avec eux, en utilisant des mouvements de saisie à l’aide de vos mains.</span><span class="sxs-lookup"><span data-stu-id="80a0b-209">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with them, by using near-interaction grab gestures with your hands.</span></span> <span data-ttu-id="80a0b-210">Les types d’hologrammes qu’il est recommandé de rapprocher dans le but de les manipuler directement sont les menus, les contrôles et les boutons de petite taille, ainsi que les hologrammes qui rentrent entièrement dans le champ de vision HoloLens 2 lorsque vous les manipulez ou les inspectez.</span><span class="sxs-lookup"><span data-stu-id="80a0b-210">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="80a0b-211">Les applications et les scénarios ont tous leurs propres spécificités. Nous continuerons donc à affiner et à publier des conseils de conception adaptées à chaque situation, en nous basant sur vos commentaires et sur vos expériences.</span><span class="sxs-lookup"><span data-stu-id="80a0b-211">Every application and scenario are different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-caveats-and-learnings-about-moving-applications-from-x86-to-arm"></a><span data-ttu-id="80a0b-212">Autres avertissements et informations sur le déplacement d’applications de x86 vers ARM</span><span class="sxs-lookup"><span data-stu-id="80a0b-212">Additional caveats and learnings about moving applications from x86 to ARM</span></span>

- <span data-ttu-id="80a0b-213">Les applications Unity sont simples, car vous pouvez créer un pack d’applications ARM ou déployer directement sur l’appareil pour exécuter le pack.</span><span class="sxs-lookup"><span data-stu-id="80a0b-213">Straight-forward Unity applications are simple because you can build an ARM application bundle or deploy directly to the device for the bundle to run.</span></span> <span data-ttu-id="80a0b-214">Le développement de certains plug-ins natifs Unity peut constituer un défi.</span><span class="sxs-lookup"><span data-stu-id="80a0b-214">Some Unity native plugins can present certain development challenges.</span></span> <span data-ttu-id="80a0b-215">Pour cette raison, vous devez mettre à niveau tous les plug-ins Unity natifs vers Visual Studio 2019, puis recréer pour ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-215">Because of this, you must upgrade all Unity native plugins to Visual Studio 2019 and then rebuild for ARM.</span></span>

- <span data-ttu-id="80a0b-216">Une application utilisait le plug-in Unity AudioKinetic Wwise, et cette version d’Unity n’avait pas de plug-in UWP ARM, ce qui rendait très difficile la réutilisation des fonctionnalités audio dans l’application en question pour qu’elles s’exécutent sur ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-216">One application used the Unity AudioKinetic Wwise plugin and that version of Unity did not have a UWP ARM plugin, which caused a considerable effort to rework sound capabilities into the application in question to run on ARM.</span></span> <span data-ttu-id="80a0b-217">Vérifiez que tous les plug-ins nécessaires pour vos plans de développement sont installés et disponibles dans Unity.</span><span class="sxs-lookup"><span data-stu-id="80a0b-217">Ensure that all required plugins for your development plans are installed and available in Unity.</span></span>

- <span data-ttu-id="80a0b-218">Dans certains cas, il est possible qu’un plug-in UWP/ARM n’existe pas pour les plug-ins requis par l’application, ce qui bloque la capacité à porter l’application et à l’exécuter sur HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="80a0b-218">In some cases, a UWP/ARM plugin might not exist for application-required plugins, which blocks the ability to port the application and run it on HoloLens 2.</span></span> <span data-ttu-id="80a0b-219">Contactez votre fournisseur de plug-ins pour résoudre le problème et obtenir une prise en charge d’ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-219">Contact your plugin provider to resolve the issue and provide support for ARM.</span></span>

- <span data-ttu-id="80a0b-220">Dans les nuanceurs, minfloat et ses variantes (telles que min16float, minint, etc.) peuvent ne pas avoir le même comportement dans HoloLens 2 que dans HoloLens (1re génération).</span><span class="sxs-lookup"><span data-stu-id="80a0b-220">The minfloat (and variants such as min16float, minint, etc.…) in shaders might behave differently on HoloLens 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="80a0b-221">Ceux-ci ont pour but de garantir que le nombre de bits spécifié sera utilisé (au minimum).</span><span class="sxs-lookup"><span data-stu-id="80a0b-221">Specifically, these guarantee that at least the specified number of bits will be used.</span></span> <span data-ttu-id="80a0b-222">Avec les processeurs graphiques Intel/Nvidia, ils sont le plus souvent traités comme des 32 bits.</span><span class="sxs-lookup"><span data-stu-id="80a0b-222">On Intel/Nvidia GPUs, these are largely treated as 32 bits.</span></span> <span data-ttu-id="80a0b-223">Sur ARM, le nombre de bits spécifié est respecté.</span><span class="sxs-lookup"><span data-stu-id="80a0b-223">On ARM, the number of bits specified is actually adhered to.</span></span> <span data-ttu-id="80a0b-224">Dans la pratique, cela signifie que les nombres peuvent avoir une précision ou une portée moindre dans HoloLens 2 que dans HoloLens (1re génération).</span><span class="sxs-lookup"><span data-stu-id="80a0b-224">That means in practice, these numbers might have less precision or range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="80a0b-225">Les instructions _asm ne semblent pas fonctionner sur ARM, ce qui signifie que tout code utilisant les instructions _asm doit être réécrit.</span><span class="sxs-lookup"><span data-stu-id="80a0b-225">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions must be rewritten.</span></span>

- <span data-ttu-id="80a0b-226">Le jeu d’instructions SIMD n’est pas pris en charge sur ARM, car plusieurs en-têtes, comme xmmintrin.h, emmintrin.h, tmmintrin.h et immintrin.h, ne sont pas disponibles sur ARM.</span><span class="sxs-lookup"><span data-stu-id="80a0b-226">The SIMD instruction set is not supported on ARM because various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h, are not available on ARM.</span></span>

- <span data-ttu-id="80a0b-227">Sur ARM, le compilateur du nuanceur est exécuté lors du premier appel de dessin, après le chargement du nuanceur ou après la modification d’un élément dont dépend le nuanceur, mais pas au moment du chargement du nuanceur.</span><span class="sxs-lookup"><span data-stu-id="80a0b-227">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="80a0b-228">L’impact sur le taux de trames peut être visible, en fonction du nombre de nuanceurs qui doivent être compilés.</span><span class="sxs-lookup"><span data-stu-id="80a0b-228">The impact on framerate can be noticeable, depending on how many shaders need to be compiled.</span></span> <span data-ttu-id="80a0b-229">Cela a plusieurs impacts sur la façon dont les nuanceurs doivent être gérés, packagés et mis à jour sur HoloLens 2, par rapport à HoloLens (1re génération).</span><span class="sxs-lookup"><span data-stu-id="80a0b-229">This has various implications for how shaders should be handled, packaged, updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="80a0b-230">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="80a0b-230">See also</span></span>
* [<span data-ttu-id="80a0b-231">Installer les outils</span><span class="sxs-lookup"><span data-stu-id="80a0b-231">Install the tools</span></span>](../install-the-tools.md)
* [<span data-ttu-id="80a0b-232">MRTK - Guide d’installation (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-232">MRTK - Installation guide (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Installation.html)
* [<span data-ttu-id="80a0b-233">Page d’accueil de la documentation MRTK (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-233">MRTK - Documentation home (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html)
* [<span data-ttu-id="80a0b-234">Portage de HoloToolkit/MRTK vers MRTK version 2 (GitHub)</span><span class="sxs-lookup"><span data-stu-id="80a0b-234">Porting from HoloToolkit/MRTK to MRTK version 2 (GitHub)</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html)
* [<span data-ttu-id="80a0b-235">Paramètres recommandés pour Unity</span><span class="sxs-lookup"><span data-stu-id="80a0b-235">Recommended settings for Unity</span></span>](../unity/recommended-settings-for-unity.md)
* [<span data-ttu-id="80a0b-236">Comprendre les performances pour la réalité mixte</span><span class="sxs-lookup"><span data-stu-id="80a0b-236">Understanding performance for Mixed Reality</span></span>](../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)

